# Estado actual del repositorio (2025-12-28)

## Estructura principal
- `src/`: CLI TypeScript (config, core deploy/seed, sync/canvas, utils).
- `manifests/`: manifest YAML de Notion.
- `prompts/`: prompts operativos (Gemini).
- `docs/`: ADR/arquitectura, guías.
- `scripts/archive/`: scripts ad-hoc de análisis/migración (ahora archivados).
- `reports/`: análisis previos, backups.
- `logs/`: bitácoras.
- `dist/`, `node_modules/`, `.venv/`: artefactos locales (no versionables).

## Archivos clave
- `src/index.ts`: CLI `nos` (deploy, sync, seed, diagnose, info).
- `src/config.ts`: IDs de bases y constantes.
- `src/core/deploy.ts`: despliegue de esquema Notion.
- `src/core/seed.ts`: seed de datos base.
- `src/sync/canvas.ts`: sync Canvas → Notion.
- `src/utils/helpers.ts`: retry, rate limiter.
- `manifests/nos.yaml`: definición de DBs, propiedades, relaciones, rollups.
- `project_memory.md`: memoria del proyecto / arquitectura.
- `SYSTEM_INSTRUCTIONS.md`: protocolo de operación (Antigravity Architect).
- `TASKS.md`: lista de tareas abiertas.
- `LEGACY_SCRIPTS.md`: guía de scripts archivados.

## Observaciones rápidas
- Tokens expuestos fueron removidos de scripts archivados; requieren `NOTION_TOKEN` vía env.
- Manifest y seeds contienen mojibake previo; pendiente normalizar a UTF-8 limpio y alinear claves con `src/config.ts`.
- CLI carece de flags de `--dry-run/--audit` y cliente Notion centralizado.
- No hay logger estructurado ni backups automatizados.

## Próximos pasos inmediatos (ver TASKS.md)
- Normalizar manifest/seed, agregar validador.
- Añadir dry-run y logger al CLI y core.
- Script de backup Notion seguro (solo lectura).
- Completar gobernanza de agentes y CI básico.
